<div class="wrapper-modal">

  <!--Assign Job-->
  <div class="modal fade" id="Modal1" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document" id="loginModal" [ngStyle]="{'display':showHideModal}">
      <div class="modal-content">

        <div class="close-box">
          <button type="button" data-dismiss="modal">X</button>
        </div>

        <div class="modal-body space-bitween">
          <form [formGroup]="assignDriverFormVal" (ngSubmit)="onClickAssignDriver()">
            <div class="row">
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="form-group">
                  <label for="name" class="col-form-label">Route Name</label>
                  <input type="text" class="form-control" id="name" formControlName='route_name'
                    [(ngModel)]="assignDriverFormModel.route_name"
                    [ngClass]="{ 'is-invalid': submittedAssign &amp;&amp; assignDriverFormVal.controls.route_name.errors }"
                    autocomplete="off" />
                  <div *ngIf="submittedAssign &amp;&amp; assignDriverFormVal.controls.route_name.errors"
                    class="text-danger">
                    <div *ngIf="assignDriverFormVal.controls.route_name.errors.required">Route Name is required</div>
                  </div>
                </div>
              </div>

              <div class="col-xs-12 col-sm-6 col-md-6 col-lg-12">
                <div class="form-group">
                  <label for="time" class="col-form-label">Date/Time</label>
                  <input class="form-control" [owlDateTime]="dt1" [owlDateTimeTrigger]="dt1"
                    formControlName='assign_date_time' [(ngModel)]="assignDriverFormModel.assign_date_time"
                    [ngClass]="{ 'is-invalid': submittedAssign &amp;&amp; assignDriverFormVal.controls.assign_date_time.errors }"
                    autocomplete="off" />
                  <owl-date-time #dt1></owl-date-time>
                  <div *ngIf="submittedAssign &amp;&amp; assignDriverFormVal.controls.assign_date_time.errors"
                    class="text-danger">
                    <div *ngIf="assignDriverFormVal.controls.assign_date_time.errors.required">Date Time is required
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" *ngIf="hubList?.length > 0">
                <div class="form-group">
                  <label for="Assign Driver" class="col-form-label">Hub</label>
                  <select class="form-control" id="sel1" formControlName='hub_id'
                    [(ngModel)]="assignDriverFormModel.hub_id" (change)="getDriverByHub($event.target.value)">
                    <option [value]='0' selected="selected">--Select Hub--</option>
                    <option *ngFor="let hub of hubList; let i = index" [value]="hub.id">
                      {{hub.name}}
                    </option>
                  </select>
                </div>
              </div>

              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="form-group">
                  <label for="Assign Driver" class="col-form-label">Assign Driver</label>
                  <select class="form-control" id="sel1" formControlName='driver_id'
                    [(ngModel)]="assignDriverFormModel.driver_id"
                    [ngClass]="{ 'is-invalid': submittedAssign &amp;&amp; assignDriverFormVal.controls.driver_id.errors }">
                    <option [value]='0' selected="selected">--Select Driver--</option>
                    <option *ngFor="let driver of driverList; let i = index" [value]="driver.id">
                      {{driver.name}}
                    </option>
                  </select>
                  <div *ngIf="submittedAssign &amp;&amp; assignDriverFormVal.controls.driver_id.errors"
                    class="text-danger">
                    <div *ngIf="assignDriverFormVal.controls.driver_id.errors.required">Driver is required</div>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" type="submit" class="btn btn-primary">Assign
                Driver</button>
            </div>
          </form>
        </div>

      </div>
    </div>
  </div>
  <!--//Assign Job-->


  <!--Cancel Job-->
  <div class="modal fade" id="Modal2" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document" [ngStyle]="{'display':showHideModal}">
      <div class="modal-content">
        <div class="close-box">
          <button type="button" data-dismiss="modal">X</button>
        </div>

        <div class="modal-body space-bitween">
          <div class="inner-set-section">
            <div class="tagline-headding">Would you like to cancel the job ?</div>
            <div class="main-paira">
              <p>Shipment Ticket:{{shipment_ticket}}</p>
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button (click)="processCancelShipment(shipment_ticket)" type="button" class="btn btn-primary">Please do
            it!</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal">Cancel</button>
        </div>
      </div>
    </div>
  </div>
  <!--//Cancel Job-->

  <!--Withdraw Job-->
  <div class="modal fade" id="Modal3" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document" [ngStyle]="{'display':showHideModal}">
      <div class="modal-content">
        <div class="close-box">
          <button type="button" data-dismiss="modal">X</button>
        </div>

        <div class="modal-body space-bitween">
          <div class="inner-set-section">
            <div class="tagline-headding">Would you like to withdraw the route {{shipment_route_name}}?</div>
            <div class="main-paira">
              <p>All of the unprocessed shipment will move to unassinged job.</p>
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button (click)="processWithdrawShipment(shipment_route_id)" type="button" class="btn btn-primary">Please do
            it!</button>
          <button type="button" data-dismiss="modal" class="btn btn-primary">Cancel</button>
        </div>
      </div>
    </div>
  </div>
  <!--//Withdraw Job-->

  <!--View Details-->
  <div class="modal fade" id="Modal4" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog2" role="document" [ngStyle]="{'display':showHideModal}">
      <div class="modal-content" style="border: none;">
        <div class="close-box close-box-view-details">
          <button type="button" data-dismiss="modal">X</button>
        </div>

        <mat-tab-group animationDuration="0ms" [(selectedIndex)]="selectedIndex"
          (selectedTabChange)="getTrakingInfo($event,trakingInfoRequiredData)">
          <mat-tab label="View Details">
            <div class="modal-footers modal-footers2 modal-footers-view-tab">
              <button *ngIf="routeType=='assign'" (click)="processReleaseShipment()" type="button"
                class="btn btn-primary">Release Shipment</button>
              <a *ngIf="routeType=='assign'" href="" (click)="validateDeliverShipment()" class="btn btn-primary"
                data-toggle="modal" data-target="#Modal6" [attr.data-dismiss]="releaseShipmentTkt.length?modal:''">
                <span>Deliver Shipment</span>
              </a>
              <button *ngIf="booking_type != 'Vendor' && drop_type != 'unassinged'" type="button"
                class="btn btn-primary" (click)="downloadExportCageSheet()">Export
                Cagesheet</button>

              <button *ngIf="booking_type != 'Vendor'" type="button" class="btn btn-primary"
                (click)="downloadPodLabel()">
                <i class="material-icons">
                  picture_as_pdf
                </i>Pod Label</button>

              <a *ngIf="routeType=='assign'" href="" (click)="validateCardedShipment()" class="btn btn-primary"
                data-toggle="modal" data-target="#Modal5" [attr.data-dismiss]="releaseShipmentTkt.length?modal:''">
                <span>Carded Shipment</span>
              </a>


              <select *ngIf="routeType=='unassign'" [(ngModel)]="resetDisputed.action_id"
                class="btn btn-primary selection" id="sel1" (change)="sendToDisputed($event.target.value)">
                <option [value]='0' selected="selected">--Disputed--</option>
                <option *ngFor="let diputedCode of disputedList; let i = index" [value]="diputedCode.action_id">
                  {{diputedCode.action_name}}
                </option>
              </select>


              <select *ngIf="routeType=='unassign'" [(ngModel)]="resetAssignRoute.shipment_route_id"
                class="btn btn-primary selection" id="sel1" (change)="moveToAssignRoute($event.target.value)">
                <option [value]='0' selected="selected">--Route Assign--</option>
                <option *ngFor="let routeList of assignRouteList; let i = index" [value]="routeList.shipment_route_id">
                  {{routeList.route_name}}
                </option>
              </select>
            </div>
            <div class="modal-body space-bitween ">
              <div style="width: 100%;" class="space-block">
                <ng-container *ngIf="routeType !='unassign'">
                  <span>
                    <h4>Route:</h4>{{routeName}}
                  </span>

                  <span>
                    <h4>Driver:</h4>{{driverName}}
                  </span>

                  <span>
                    <h4>Route Id:</h4>{{shipment_route_id}}
                  </span>
                </ng-container>

                <span *ngIf="booking_type == 'Vendor' || booking_type == 'NEXT'">
                  <h4>Total Item:</h4>{{totalJobItem}}
                </span>

                <span *ngIf="booking_type != 'Vendor'">
                  <h4>Vehicle Type:</h4>{{vehicle_cat_name}}
                </span>
                
              </div>

              <!--Show View Details Info-->
              <div class="inner-set-section">
                <ag-grid-angular style="width: auto; height: 400px;" class="ag-theme-balham" [rowData]="rowData"
                  [columnDefs]="columnDefs" [modules]="modules" [suppressRowClickSelection]="true"
                  [rowSelection]='selectionMode' [enableCellTextSelection]="true" [defaultColDef]="defaultColDef"
                  (selectionChanged)="onSelectionChanged($event)" [floatingFilter]="true">
                </ag-grid-angular>
              </div>


            </div>
          </mat-tab>
          <!--Show Traking Info-->
          <mat-tab label="Tracking">
            <div class="modal-body traking-details-grid">
              <ag-grid-angular style="width: auto; height: 400px;" class="ag-theme-balham"
                [rowData]="rowDataTrackingInfo" [columnDefs]="columnDefsTrakingInfo" [modules]="modules"
                [suppressRowClickSelection]="true" [rowSelection]='selectionMode' [defaultColDef]="defaultColDef"
                [enableCellTextSelection]="true" [overlayLoadingTemplate]="overlayLoadingTemplateTracking"
                (gridReady)="onGridReadyTracking($event)" [floatingFilter]="true">
              </ag-grid-angular>
            </div>
          </mat-tab>

          <!--Show By Parcel Info-->
          <mat-tab label="BY PARCEL">
            <div class="modal-body traking-details-grid">
              <ag-grid-angular style="width: auto; height: 400px;" class="ag-theme-balham"
                [rowData]="rowDataByParcelInfo" [columnDefs]="columnDefsByParcel" [modules]="modules"
                [suppressRowClickSelection]="true" [rowSelection]='selectionMode' [defaultColDef]="defaultColDef"
                [enableCellTextSelection]="true" [overlayLoadingTemplate]="overlayLoadingTemplateParcel"
                (gridReady)="onGridReadyByParcel($event)" [floatingFilter]="true">
              </ag-grid-angular>
            </div>
          </mat-tab>

          <!--Show POD Info-->
          <mat-tab label="POD">
            <div class="modal-body traking-details-grid">
              <ag-grid-angular style="width: auto; height: 400px;" class="ag-theme-balham" [rowData]="rowDataPodInfo"
                [columnDefs]="columnDefsPOD" [modules]="modules" [suppressRowClickSelection]="true"
                [rowSelection]='selectionMode' [defaultColDef]="defaultColDef" [enableCellTextSelection]="true"
                [overlayLoadingTemplate]="overlayLoadingTemplatePod" (gridReady)="onGridReadyPod($event)"
                [floatingFilter]="true">
              </ag-grid-angular>
            </div>
          </mat-tab>
        </mat-tab-group>
      </div>
    </div>
  </div>
  <!--//View Details-->


  <!--Carded Shipment Form-->
  <div *ngIf="releaseShipmentTkt.length" class="modal fade" id="Modal5" tabindex="-1" role="dialog"
    aria-labelledby="ModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document" [ngStyle]="{'display':showHideModal}">
      <div class="modal-content">
        <div class="close-box">
          <button type="button" data-dismiss="modal">X</button>
        </div>

        <div class="modal-body space-bitween">
          <div class="inner-set-section">
            <div class="tagline-headding">Carded Shipment(s)</div>
          </div>
          <form [formGroup]="cardedFormVal" (ngSubmit)="onClickCarded()">
            <div class="row">
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="form-group">
                  <label for="name" class="col-form-label">Carded Status</label>
                  <select class="form-control" id="sel1" formControlName='carded_status'
                    [(ngModel)]="cardedFormModel.carded_status"
                    [ngClass]="{ 'is-invalid': submittedCard &amp;&amp; cardedFormVal.controls.carded_status.errors }"
                    required>
                    <option selected="selected">--Select Status--</option>
                    <option *ngFor="let cd of cardedeOptions" [value]="cd">
                      {{cd}}
                    </option>
                  </select>
                  <div *ngIf="submittedCard &amp;&amp; cardedFormVal.controls.carded_status.errors" class="text-danger">
                    <div *ngIf="cardedFormVal.controls.carded_status.errors.required">Carded Status is required</div>
                  </div>
                </div>
              </div>

              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="form-group">
                  <label for="name" class="col-form-label">Drivers Comment</label>
                  <input type="text" class="form-control" id="name" placeholder="Comment"
                    formControlName='driver_comment' [(ngModel)]="cardedFormModel.driver_comment" autocomplete="off"
                    [ngClass]="{ 'is-invalid': submittedCard &amp;&amp; cardedFormVal.controls.driver_comment.errors }"
                    required />
                </div>
                <div *ngIf="submittedCard &amp;&amp; cardedFormVal.controls.driver_comment.errors" class="text-danger">
                  <div *ngIf="cardedFormVal.controls.driver_comment.errors.required">Carded Status is required</div>
                </div>
              </div>

              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="form-group">
                  <label for="date" class="col-form-label">Next Schedule Date and Time</label>
                  <input type="text" class="form-control" id="date" [owlDateTime]="dt3" [owlDateTimeTrigger]="dt3"
                    formControlName='carded_date_time' [(ngModel)]="cardedFormModel.carded_date_time"
                    [ngClass]="{ 'is-invalid': submittedCard &amp;&amp; cardedFormVal.controls.carded_date_time.errors }"
                    required autocomplete="off" />
                  <owl-date-time #dt3></owl-date-time>
                </div>
                <div *ngIf="submittedCard &amp;&amp; cardedFormVal.controls.carded_date_time.errors"
                  class="text-danger">
                  <div *ngIf="cardedFormVal.controls.carded_date_time.errors.required">Date Time is required</div>
                </div>
              </div>


            </div>
            <div class="modal-footer">
              <button type="button" type="submit" class="btn btn-primary">Carded</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <!--//Carded Shipment Form-->

  <!--Deliver Shipment-->
  <div *ngIf="releaseShipmentTkt.length" class="modal fade" id="Modal6" tabindex="-1" role="dialog"
    aria-labelledby="ModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document" [ngStyle]="{'display':showHideModal}">
      <div class="modal-content">
        <div class="close-box">
          <button type="button" data-dismiss="modal">X</button>
        </div>

        <div class="modal-body space-bitween">
          <div class="inner-set-section">
            <div class="tagline-headding">Delivered Shipment(s)</div>
          </div>
          <form [formGroup]="deliverFormVal" (ngSubmit)="onClickDeliver()">
            <div class="row">
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="form-group">
                  <label for="name" class="col-form-label">Contact Person</label>
                  <input type="text" class="form-control" id="name" formControlName='contact_person'
                    [(ngModel)]="deliverFormModel.contact_person"
                    [ngClass]="{ 'is-invalid': submittedDelV &amp;&amp; deliverFormVal.controls.contact_person.errors }"
                    autocomplete="off" required />
                </div>
                <div *ngIf="submittedDelV &amp;&amp; deliverFormVal.controls.contact_person.errors" class="text-danger">
                  <div *ngIf="deliverFormVal.controls.contact_person.errors.required">Contact Person is required</div>
                </div>
              </div>

              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="form-group">
                  <label for="name" class="col-form-label">Comment</label>
                  <input type="text" class="form-control" id="name" formControlName='deliver_comment'
                    [(ngModel)]="deliverFormModel.deliver_comment"
                    [ngClass]="{ 'is-invalid': submittedDelV &amp;&amp; deliverFormVal.controls.deliver_comment.errors }"
                    autocomplete="off" required />
                </div>
                <div *ngIf="submittedDelV &amp;&amp; deliverFormVal.controls.deliver_comment.errors"
                  class="text-danger">
                  <div *ngIf="deliverFormVal.controls.deliver_comment.errors.required">Comment is required</div>
                </div>
              </div>

              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="form-group">
                  <label for="date" class="col-form-label">Date and Time</label>
                  <input type="text" class="form-control" id="date" [owlDateTime]="dt2" [owlDateTimeTrigger]="dt2"
                    formControlName='deliver_date_time' [(ngModel)]="deliverFormModel.deliver_date_time"
                    [ngClass]="{ 'is-invalid': submittedDelV &amp;&amp; deliverFormVal.controls.deliver_date_time.errors }"
                    autocomplete="off" required />
                  <owl-date-time #dt2></owl-date-time>
                </div>
                <div *ngIf="submittedDelV &amp;&amp; deliverFormVal.controls.deliver_date_time.errors"
                  class="text-danger">
                  <div *ngIf="deliverFormVal.controls.deliver_date_time.errors.required">Date Time is required</div>
                </div>
              </div>


            </div>
            <div class="modal-footer">
              <button type="button" type="submit" class="btn btn-primary">Deliver</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <!--//Deliver Shipment-->

   <!--Assign Job to CX driver-->
   <div class="modal fade" id="Modal7" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document" [ngStyle]="{'display':showHideModal}">
      <div class="modal-content">

        <div class="close-box">
          <button type="button" data-dismiss="modal">X</button>
        </div>

        <div class="modal-body space-bitween">
            <div class="inner-set-section">
                <div class="tagline-headding">CX DRIVER</div>
              </div>
            <form [formGroup]="cxBidFrom" (ngSubmit)="processForBid()">
              <div class="row">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                  <div class="form-group">
                    <span class="or-middle">Place a bid on CX:</span>
                  <label for="Assign Driver" class="col-form-label">CX Vehicle Type</label>
                  <select class="form-control" id="sel1" formControlName='bid_vehicle_value'
                    [(ngModel)]="cxBidFormModel.bid_vehicle_value"
                    [ngClass]="{ 'is-invalid':submitedCx &amp;&amp; cxBidFrom.controls.bid_vehicle_value.errors }">
                    <option [value]='0' selected="selected">--Select Vehicle Type--</option>
                    <option *ngFor="let vl of cxVehicleList; let i = index" [value]="vl.value">
                      {{vl.name}}
                    </option>
                  </select>
                  <div *ngIf="submitedCx &amp;&amp;cxBidFrom.controls.bid_vehicle_value.errors"
                    class="text-danger">
                    <div *ngIf="cxBidFrom.controls.bid_vehicle_value.errors.required">Vehicle type is required</div>
                  </div>
                    
                    <label for="name" class="col-form-label">Collection Date</label>
                    <input class="form-control" [owlDateTime]="dtCxC" [owlDateTimeTrigger]="dtCxC"
                    formControlName='bid_collection_date' [(ngModel)]="cxBidFormModel.bid_collection_date"
                    [ngClass]="{ 'is-invalid':submitedCx &amp;&amp;cxBidFrom.controls.bid_collection_date.errors }"
                    autocomplete="off" />
                  <owl-date-time #dtCxC></owl-date-time>
                  <div *ngIf="cxBidFrom.controls.bid_collection_date.errors"
                    class="text-danger">
                    <div *ngIf="submitedCx &amp;&amp; cxBidFrom.controls.bid_collection_date.errors.required">Collection Date Time is required
                    </div>
                   </div> 
                    <label for="name" class="col-form-label">Deliver Date</label>
                    <input class="form-control" [owlDateTime]="dtCxD" [owlDateTimeTrigger]="dtCxD"
                    formControlName='bid_delivery_date' [(ngModel)]="cxBidFormModel.bid_delivery_date"
                    [ngClass]="{ 'is-invalid':submitedCx &amp;&amp;cxBidFrom.controls.bid_delivery_date.errors }"
                    autocomplete="off" />
                  <owl-date-time #dtCxD></owl-date-time>
                  <div *ngIf="cxBidFrom.controls.bid_delivery_date.errors"
                    class="text-danger">
                    <div *ngIf="submitedCx &amp;&amp;cxBidFrom.controls.bid_delivery_date.errors.required">Delivery Date Time is required
                    </div>
                  </div>
                </div>
              </div>
            </div>
              <div class="modal-footer">
                <button type="button" type="submit" class="btn btn-primary">
                  Place Bid Now</button>
              </div>
            </form>
         

            <span class="or-middle">Or</span>

         
            <div class="row">
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="form-group">
                  <span class="or-middle">Associate the CX Driver Directly</span>

                  <label for="name" class="col-form-label">Driver Name</label>
                  <input type="text" class="form-control" id="name"  autocomplete="off" />
                  <label for="name" class="col-form-label">Driver Reference Id</label>
                  <input type="text" class="form-control" id="name"  autocomplete="off" />
                  <label for="name" class="col-form-label">Driver Cost</label>
                  <input type="text" class="form-control" id="name"  autocomplete="off" />
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" type="submit" class="btn btn-primary">Assign
                Driver</button>
            </div>
         

            <table class="table table-striped table-responsive-md btn-table">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Driver Name</th>
                    <th>Cost</th>
                    <th>Ratings</th>
                    <th>Action</th>
                  </tr>
                </thead>
            
                <tbody>
                  <tr>
                    <th scope="row">1</th>
                    <td>Otto</td>
                    <td>100</td>
                    <td>**</td>
                    <td>
                      <button mdbBtn color="indigo" size="sm" mdbWavesEffect type="submit" class="m-0 btn btn-primary">Assign</button>
                    </td>
                  </tr>
                  <tr>
                      <th scope="row">2</th>
                      <td>amiya</td>
                      <td>200</td>
                      <td>***</td>
                      <td>
                        <button mdbBtn color="indigo" size="sm" mdbWavesEffect type="submit" class="m-0 btn btn-primary">Assign</button>
                      </td>
                  </tr>
                  
                </tbody>
              </table>
              <div class="modal-footer">
                      <button type="button" type="submit" class="btn btn-primary">Withdraw From CX</button>
                    </div>
        </div>

      </div>
    </div>
  </div>
</div>